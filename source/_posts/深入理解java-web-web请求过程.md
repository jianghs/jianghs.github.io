---
title: 深入理解java web-web请求过程
date: 2019-12-10 21:33:48
tags: Java
categories: coding
---

## web 请求过程

浏览器缓存

1. catch-control/pragma
2. expires
3. lastmodified/etag

资源的最后修改时间/让服务端给每个页面分配唯一id

## dns解析过程

1. 浏览器检查缓存（ttl属性控制）
2. 操作系统缓存（）
3. LDNS（网络设置的DNS服务器地址）
4. root server 域名服务器
5. 根域名服务器返回给本地域名服务器一个主域名服务器地址
6. 本地域名服务器向主域名服务器发送请求

## 域名缓存

1. local dns server
2. 用户本地机器

## 域名解析方式

1. A记录-多个域名解析到一个ip。
2. MX记录-将某个域名下的邮件服务器指向自己的ip。
3. CNAME-别名解析，将一个域名设置为多个别名。
4. NS记录-为某个域名指定DNS服务器。
5. TXT记录-为某个主机名或者域名设置说明。

## CDN

内容分布网络，先进的流量分发网络。

CDN = 镜像 + 缓存 + 负载均衡

首先去CDN拿文件，如果CDN没有，则去源站拿这个文件。

## 负载均衡

对工作任务平衡、分摊到多个工作单元上。

### 链路负载均衡

通过dns解析成不同的ip，然后指向不同的应用服务器。

优点：直接访问目标服务器，速度比较快。

缺点：dns在本地和local dns server存在缓存，一旦目标服务器挂掉，dns没有及时更新域名解析，会出现用户无法访问。

### 集群负载均衡

1. 硬件负载，如F5。性能好，价格昂贵，流量陡增时无法动态扩展。
2. 软件负载。廉价，经过多层代理，增加网络延时。

### 操作系统负载均衡

利用操作系统级的软中断或者硬件中断实现。如设置多队列网卡实现。
